# PA273-Potentiostat-Software
#Created by Amit Sandhel
This software is designed to operate the PA273 potentiostat. 
Two pdf manuals are provided. It is recommended to read both manuals to understand all the commands possible to implement with PA273. It is also advised to run the software using the simulator to understand software functionality.

Currently the software has two versions

1. pa273v1.py: This version (version 1) runs the potentiostat manually. This version is designed to run single voltage experiements for long periods of time  A simple version called pa273v1 which runs the potentiostat manually. Ideal for single voltage measurements.
2. pa273v2.py: This version (version 2) runs the potentionstat via a custom command language. Version 2 is designed for waveform programming Read the manuals provided for more information on waveform programming.

# Requirements
  1. Python (2.6, 2.7)
  2. Numpy
  3. matplotlib
    

**The software comes with the following built in features: ** 
* custom built command language to execute potentiostat commands 
* built in simulators for testing and hardware software development 
* test folder with Python unittests (test folder)
* displaying data in real-time with graphs (graphclass.py)
* post data run analysis outputs static graphs (postrun.py)
* argparse command line to run the software using various settings and parameters
* logging files exist for each script logging all the data
* Example folder which contains sample data, log files amd data that will be generated. This data can be generated by the user when using the simulator parameter. 
* Manuals folder contains the potentiostat manuals needed to operate the potentiostat.  
                    
The following scripts exist in this software. 
**Note** All names should remain as is and no duplicates of names should exist to prevent unwanted error !

1. **Test folder:** contains various unittests for each individual script. These are run independently of the main software also via the terminal
2. **__init__.py:** Empty folder to build the subdirectory
3. **graphclass.py:** Script which outputs the data in real-time. **Note** This script lags in windows but is perfectly **OK** in macs and linux operating systems. 
4. **main.py:** Script which contains argparse and controls the execution of all scripts. Handles command execution
5. **pa273_v1.py:** First version of potentiostat software. This software is capable of running single volage measurements.
6. **pa273_v2.py:** Second enhanced version of potentiostat software capable of waveform programming using a command language. 
7. **postrun.py:** Generates data of experiment using matplotlib. Also saves the data as a png image file.
8. **beastiecommand.csv:** command language for pa273_v2.py script. The command language reads the time and voltages from the beastie command.
9. **BOOK2.csv:** csv file where the data is recorded for pa273_v2.py script. 
10. **BOOK3.csv:** csv file where the data is recorded for pa273_v1.py script.
11. **Examples:** Folder that contains sample log files and sample recorded data. This data can be generated via the simulator parameter or when running the real experiment. 
12. **manuals folder:** Folder containing the manuals to operate the potentiostat in pdf format. 

#Notes of Caution:
* The simultaor accepts the BIAS command only. Adding in any other potentiostat commands will result in the simulator failing. However additional commands can be easily developed by the user by increasing functionality of the user. 
* The Simulator class is built within the pa273_v1.py and pa273_v2.py scripts individually. 
* The command language file name and the filename BOOK2.csv must not be changed. These filenames are opened by py273v2.py and postrun.py scripts respectively based on filename.  
* many spike and concept tests have been commented out. User may wish to uncomment them for testing purposes 


#Operating Instructions
* Read the pdf manuals provided on the potentiostat to fully understand all the commands available.  
* Run the software with the simulator to have a full understanding of how the software works, the log files generated and the graph display given.

## Available Argparse Commands
* The Potentiostat runs via Pythons argparse commands so can be run from a terminal/command prompt
* A list of available argparse commands are given below
* Open the command prompt/terminal to the folder directory of the software and type the following avaiable commands:
*
1. "main -h": this opens the help file for the argparse commands. Lists all the argparse commands avaialbe with descriptions
2. "main -t": runs the various test folders 
3. "main -s": runs the simulator. Must be run with the potentiostat version you wish to run via the -v (version) command
4. "main -s -v1":  runs the simulator and runs the py273_v1.py script via the simulator
5. "main -s -v2"  runs the simulator and runs the py273_v2.py script via the simulator
6. "main -v1": Runs the py273_v1.py script to the real serial port bypassing simulator
7. "main -v2": Runs the py273_v2.py script to the real serial port bypassing simulator

## Operating Instructions

###Running py273_v1.py script:
1. the script requires commands to be passed in to set the parameters
2. to change the COM setting open the pa273_v2.py script in a text editor software. Go to line 61 Section is named 
 '''COM PORT SETTINGS''' and adjust the comport setting to the number desired.
3. save the pa273_v2.py script **(DO NOT RENAME THIS FILE OVERRIDE AND SAVE IT)**  
4. In terminal type "main -s -v1" To run via the simulator. To run without simulator (to real serial comport) type "main -v1"
5. Enter in EGAIN value: options are 1, 5, 10 or 50 as stated in command prompt and in the pdf manual
6. Note entering in incorrect value will crash the software totally so user must type in command#1 again
7. Enter in IGAIN value: options are 1, 5, 10 or 50 as stated in command prompt and in the pdf manual
8. Enter the potential to apply in millivolts (mV)
9. Software will run with incrementing cycle counter displayed. No data is displayed. Data is saved in a csv file called BOOK3.csv
10. if a new voltage is desired press "A". Note the character "A" which stands for Again must be Caps-lock or software will crash. Re-Enter steps 2,3,4 
11. software will run potentiostat with new voltage
12. "Q": To exit software completely OR press "A" to enter in new voltage commands
**Note**BOOK3.csv records the time, BIAS [mV], the EGIAN, IGAIN, I-RANGE (set to auto manually on machine), voltage readout, and current charge and Qexp. 
   

###Running py273_v2.py script:
1.  open "beastiecommand.csv" excel file
2.  write the desired times (in milliseconds) and the voltages (millivolts) needed for waveform programming 
3.  save the csv excel file and close it 
4.  to change the COM setting open the pa273_v2.py script in a text editor software. Go to line 61 Section is named 
'''COM PORT SETTINGS''' and adjust the comport setting to the number desired.
5. save the pa273_v2.py script **(DO NOT RENAME THIS FILE OVERRIDE AND SAVE IT)** 
6. In terminal type "main -s -v2" To run via the simulator. 
7. To run without simulator (to real serial comport) type "main -v2"
8. software will execute. Note that a graph in real time will be displayed. The data is stored in another csv file called "BOOK2.csv". That file is then opened by postrun.py script automatically to display the static data and saves the data as a png image as well
**Note:**BOOK2.csv records the Time, AS, BIAS(voltage mV), TP-point (current)
        

#To Do/Future Features:
* Add threads and a callback feature
* Separate the serial simulator class into a separate individual script
* Add a comport setting to argparse-change the comport setting from argparse.
* Add axes labels to graphs
* Add ability to change filenames if necessary
* Improve test coverage
* improve Documentation




